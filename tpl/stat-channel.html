{% extends "base.html" %}

{% block title %}{% super %} - statistics for {{ channel }}/{{ server }}{% endblock %}

{% block center %}

  <div class="page-header">
    <h1>Statistics: {{ channel }}
      <small>
        {{ server }}
        <a href="/channel/{{ server|urlencode }}/{{ channel|cut:"#"|urlencode }}/" title="Channel log">
          <span class="glyphicon glyphicon-list-alt"></span>
        </a>
      </small>
    </h1>
  </div>

  <div class="row">
    <div class="col-md-6">

      <div class="panel panel-default">
        <div class="panel-heading"><strong>Messages</strong></div>
        <div class="panel-body">
          <dl class="dl-horizontal">
            <dt>Messages count:</dt>
            <dd>{{ message-stats.count }}</dd>
            <dt>Unique nicknames:</dt>
            <dd>{{ message-stats.users|length }}</dd>
          </dl>
        </div>

        <table class="table table-striped table-hover table-condensed">
          <thead>
            <tr>
              <th>#</th>
              <th>Nick</th>
              <th>Count</th>
              <th>%</th>
            </tr>
          </thead>
          <tbody>
            {% for user in message-stats.users %}
              <tr>
                <td>{{ forloop.counter }}</td>
                <td class="stat-nick"><strong style="color: {{ user.color }};">{{ user.nick }}</strong></td>
                <td>{{ user.messages }}</td>
                <td>{{ user.share|format:"~$" }}%</td>
              </tr>
            {% endfor %}
          </tbody>              
        </table>
      </div>

    </div>
  </div>

{% endblock %}
