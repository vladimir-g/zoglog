{% extends "base.html" %}

{% block center %}

  <div class="page-header">
    <h1>{{ channel }} <small>{{ server }}</small></h1>
  </div>

  <table class="table table-striped table-hover table-condensed">
    <thead>
      <tr>
	<th class="col-lg-1">Date</th>
	<th class="col-lg-1 col-md-1 col-sm-1 text-right">Nick</th>
	<th>Message</th>
      </tr>
    </thead>
    <tbody>
      {% for message in messages %}

	<tr{% if message.message-type == "NOTICE" %} class="info"{% endif %}
	      {% if message.message-type == "ACTION" %} class="warning"{% endif %}
	      {% if message.message-type == "KICK" %} class="danger"{% endif %}>
	      
	      <td class="text-nowrap"><small>{{ message.date|datetime:(:year "-" (:month 2) "-" (:day 2) " " (:hour 2) ":" (:min 2) ":" (:sec 2)) }}</small></td>
	      <td class="text-right">
		{% if message.message-type == "PRIVMSG" or message.message-type == "NOTICE" or message.message-type == "ACTION" %}
		  <strong>{{ message.nick }}</strong>
		{% endif %}
	      </td>
	      <td>
		{% if message.message-type == "PRIVMSG" or message.message-type == "NOTICE" or message.message-type == "ACTION" %}
		  {{ message.message }}
		{% else %}
		  <span class="text-muted">{{ message.nick }} ({{ message.host }})

		    {% if message.message-type == "JOIN" %}
		      has joined
		    {% endif %}
		    {% if message.message-type == "QUIT" %}
		      has quit{% if message.message %}: {{ message.message }}{% endif %}
		    {% endif %}
		    {% if message.message-type == "PART" %}
		      has left channel{% if message.message %}: {{ message.message }}{% endif %}
		    {% endif %}
		    {% if message.message-type == "KICK" %}
		      has been kicked{% if message.message %}: {{ message.message }}{% endif %}
		    {% endif %}
		    {% if message.message-type == "NICK" %}
		      is now known as <strong>{{ message.message }}</strong>
		    {% endif %}

		  </span>
		  
		{% endif %}
	      </td>
	</tr>
      {% endfor %}

    </tbody>
  </table>

{% endblock %}
